<div class="generateDiv">
    <div>
        <button mat-icon-button aria-label="Icon button to navigate back to exam" (click)="onBack()">
            <mat-icon color="primary">arrow_back_ios</mat-icon>
        </button>
    </div>
    <p class="lead">{{studentUSN}}</p>
    <h3>{{studentName}}</h3>
    <br>
    <button mat-raised-button color="primary" type="submit" (click)="report(studentUSN)" value="Generate">
        Generate
    </button>
    <br>
    <h3 *ngIf="testResult.length === 0">No Data</h3>
    <mat-card *ngIf="testResult.length != 0">
        <mat-card-header style="place-content: center;">
            <mat-card-title style="text-align: center;">Report</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <mat-accordion>
                <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngFor="let items of testResult">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <strong>Test ID:</strong>&nbsp;{{items.testID}}
                        </mat-panel-title>
                        <mat-panel-description>
                            <strong>Score Obtained:</strong>&nbsp;{{items.totalScore}}
                        </mat-panel-description>
                        <mat-panel-description>
                            <strong>Maximum Score:</strong>&nbsp;{{items.maxScore}}
                        </mat-panel-description>
                    </mat-expansion-panel-header>
                    <mat-list role="list">
                        <div style="display: flex; width: 100%;">
                            <div>
                                <mat-progress-spinner [color]="color" [mode]="mode" [value]="(items.totalScore)*100/items.maxScore">
                                </mat-progress-spinner>
                            </div>
                            <div>
                                {{items.totalScore}}/{{items.maxScore}}
                            </div>
                        </div>
                        <mat-list-item role="listitem" *ngFor="let item of items.answers">
                            <p><strong>Question:</strong>&nbsp;{{item.question}}</p>&nbsp;
                            <br>
                            <p><strong>Candidates Answer:</strong> &nbsp; {{item.option}}</p>
                        </mat-list-item>
                    </mat-list>
                </mat-expansion-panel>
            </mat-accordion>
        </mat-card-content>
    </mat-card>
</div>